ORG 00H
;60H for seconds ,61H for minutes, 62H for overflow
LJMP MAIN

ORG 0BH

INC 62H
MOV A, 62H
CJNE A, #0EH, last

INC 60H
MOV A, 60H
CJNE A, #3CH, set_overflow
MOV 60H, #00H

INC 61H
MOV A, 62H
CJNE A, #3CH, set_overflow
MOV 61H, #00H

set_overflow:
MOV 62H, #00H

last:
RETI

MAIN: 
	ORG 30H
		
	MOV 60H, #00H
	MOV 61H, #00H
	MOV 62H, #00H
	
	MOV 20H, #03FH
	MOV 21H, #006H
	MOV 22H, #05BH
	MOV 23H, #04FH
	MOV 24H, #066H
	MOV 25H, #06DH
	MOV 26H, #07DH
	MOV 27H, #007H
	MOV 28H, #07FH
	MOV 29H, #06FH

	MOV TMOD, #01H
	MOV TL0, #00H
	MOV TL0, #00H
	MOV IE, #82H
	SETB TR0
	
DISPLAY:
	MOV R1, #020H
AGAIN:
	MOV R6, #05H
OUTER:
	MOV R7, #010H
INNER:
	MOV A, 61H
	LCALL SET_DISP
	
	MOV R1, A
	MOV P0, @R1
	MOV P2, #01H
	LCALL SDELAY
	MOV P2, #00H
	
	MOV A, B
	ORL A, #20H
	MOV R1, A
	MOV A, @R1
	ORL A, #80h
	MOV P0, A
	MOV P2, #02H
	LCALL SDELAY
	MOV P2, #00H
	
	MOV A, 60H
	LCALL SET_DISP
	
	MOV R1, A
	MOV P0, @R1
	MOV P2, #04H
	LCALL SDELAY
	MOV P2, #00H

	MOV A, B
	ADD A, #20H
	MOV R1, A
	MOV P0, @R1
	MOV P2, #08H
	LCALL SDELAY
	MOV P2, #00H

	DJNZ R7, INNER
	DJNZ R6, OUTER

SJMP DISPLAY

SET_DISP:
	MOV B, #0AH	
	DIV AB
	ORL A, #20H
RET
	
SDELAY:
	MOV R5, #018H
	SOUTER:
	MOV R4, #018H

	SINNER:
	DJNZ R4, SINNER
	DJNZ R5, SOUTER
RET

END